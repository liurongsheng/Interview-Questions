# 任务有优先级吗？

任务没有优先级，在消息队列中先进先出

但`消息队列是有优先级的`

根据 W3C 的最新解释:

- 每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列
- 在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行
- 浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行

  <https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint>

- 随着浏览器的复杂度急剧提升，W3C 不再使用宏队列的说法

在目前 chrome 的实现中，至少包含了下面的队列：

- 微队列：用户存放需要最快执行的任务，优先级「最高」
- 交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」
- 延时队列：用于存放计时器到达后的回调任务，优先级「中」

添加任务到微队列的主要方式主要是使用 Promise、MutationObserver

例如：

```js
// 立即把一个函数添加到微队列
Promise.resolve().then(函数);
```
